name: Terraform Deploy Prod

on:
    workflow_dispatch:

      jobs:
          deploy:
                runs-on: ubuntu-latest
                    steps:
                            - uses: actions/checkout@v3
                                  - uses: hashicorp/setup-terraform@v2
                                          with:
                                                      terraform_version: 1.5.0
                                                            - uses: azure/login@v1
                                                                    with:
                                                                                client-id: ${{ secrets.AZURE_CLIENT_ID }}
                                                                                          tenant-id: ${{ secrets.AZURE_TENANT_ID }}
                                                                                                    subscription-id: ${{ secrets.AZURE_SUBSCRIPTION_ID }}
                                                                                                              client-secret: ${{ secrets.AZURE_CLIENT_SECRET }}
                                                                                                                    - run: terraform -chdir=terraform init
                                                                                                                          - run: terraform -chdir=terraform plan -out=tfplan
                                                                                                                                - run: terraform -chdir=terraform apply -auto-approve tfplan

